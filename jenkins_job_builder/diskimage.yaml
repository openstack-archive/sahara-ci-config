- job-template:
    name: 'dib-{plugin}-{os}-aio'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}"
    properties:
      - zeromq-event
    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: trusty-42 || trusty-43

- job-template:
    name: 'dib-{plugin}-{os}'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}"
    properties:
      - zeromq-event
    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: trusty-42 || trusty-43

- project:
    name: sahara-image-elements
    github-org: openstack
    plugin: vanilla_2.7.1
    os:
     - u14
     - c6.6
     - c7

    jobs:
     - 'dib-{plugin}-{os}'
     - 'dib-{plugin}-{os}-aio':
          plugin:
            - cdh_5.3.0
            - cdh_5.4.0
          os:
            - u12
            - c6.6
     - 'dib-{plugin}-{os}-aio':
          plugin:
            - cdh_5.5.0
            - cdh_5.7.0
     - 'dib-{plugin}-{os}-aio':
          plugin:
            - spark_1.0.0
            - spark_1.3.1
            - spark_1.6.0
          os: u14
     - 'dib-{plugin}-{os}-aio':
          plugin:
            - storm_1.0.1
          os: u14
     - 'dib-{plugin}-{os}':
          plugin:
            - mapr_5.0.0.mrv2
            - mapr_5.1.0.mrv2
          os: u14
     - 'dib-{plugin}-{os}':
          plugin:
            - ambari_2.1
          os:
            - c6.6
     - 'dib-{plugin}-{os}':
          plugin: vanilla_2.6.0
          os:
            - u14
            - c6.6
     - 'dib-{plugin}-{os}':
          plugin: storm_1.0.1
          os: u14