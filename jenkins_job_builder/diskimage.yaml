- job-template:
    name: 'dib-{network}-{engine}-{plugin}-{os}-aio'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}"
    properties:
      - zeromq-event
    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-{network}'

- job-template:
    name: 'dib-{network}-{engine}-{plugin}-{os}'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}"
    properties:
      - zeromq-event
    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-{network}'

- project:
    name: sahara-image-elements
    github-org: openstack
    network: neutron
    engine: heat
    plugin: vanilla_2.6.0
    os:
     - u14
     - c6.6
     - c7

    jobs:
     - 'dib-{network}-{engine}-{plugin}-{os}'
     - 'dib-{network}-{engine}-{plugin}-{os}-aio':
          network: nova
          engine: direct
          plugin:
            - cdh_5.3.0
            - cdh_5.4.0
          os:
            - u12
            - c6.6
     - 'dib-{network}-{engine}-{plugin}-{os}-aio':
          engine: direct
          plugin:
            - spark_1.0.0
            - spark_1.3.1
          os: u14
     - 'dib-{network}-{engine}-{plugin}-{os}':
          plugin: mapr_4.0.2.mrv2
          os: u14
     - 'dib-{network}-{engine}-{plugin}-{os}':
          network: nova
          plugin: hdp_2.0.6
          os: c6.6
