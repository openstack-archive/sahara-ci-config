- job:
    name: 'dib-nova-heat-hdp_2'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh hdp_2"

    properties:
      - zeromq-event

    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-nova'

- job:
    name: 'dib-neutron-heat-mapr'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh mapr"

    properties:
      - zeromq-event

    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-neutron'

- job-template:
    name: 'dib-nova-direct-{plugin}-{os}-aio'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}"

    properties:
      - zeromq-event

    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-nova'

- job:
    name: 'dib-nova-direct-spark-aio'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin}"

    properties:
      - zeromq-event

    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-nova'

- job-template:
    name: 'dib-neutron-heat-vanilla_2.6-{os}'
    defaults: global
    builders:
      - gerrit-git-prep
      - ci-config-prep
      - shell: "FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}"

    properties:
      - zeromq-event

    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-neutron'

- project:
    name: sahara-image-elements
    github-org: openstack
    plugin: cdh_5.3.0
    os:
     - ubuntu
     - centos
    jobs:
     - 'dib-neutron-heat-vanilla_2.6-{os}'
     - 'dib-nova-heat-hdp_2'
     - 'dib-neutron-heat-mapr'
     - 'dib-nova-direct-spark-aio'
     - 'dib-nova-direct-{plugin}-{os}-aio'
     - 'dib-nova-direct-{plugin}-{os}-aio':
          plugin: cdh_5.4.0
          os: ubuntu
