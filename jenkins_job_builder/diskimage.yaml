- job-template:
    name: 'dib-{network}-{engine}-{plugin}-{os}-aio'
    defaults: global
    builders:
      - gerrit-git-prep
      - shell: |
              git clone https://git.openstack.org/stackforge/sahara-ci-config
              FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}
    properties:
      - zeromq-event
    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-{network}'

- job-template:
    name: 'dib-{network}-{engine}-{plugin}-{os}'
    defaults: global
    builders:
      - gerrit-git-prep
      - shell: |
              git clone https://git.openstack.org/stackforge/sahara-ci-config
              FUNCTION_PATH=$WORKSPACE/sahara-ci-config/slave-scripts $WORKSPACE/sahara-ci-config/slave-scripts/dib.sh {plugin} {os}
    properties:
      - zeromq-event
    publishers:
      - sahara-logs
      - console-log
      - trigger-cleanup
    node: 'trusty-{network}'

- project:
    name: sahara-image-elements
    github-org: openstack
    network:
     - neutron
    engine:
     - direct
    plugin:
     - vanilla_1.2.1
    os:
     - u14
     - c6.6
    
    jobs:
     - 'dib-{network}-{engine}-{plugin}-{os}-aio'
     - 'dib-{network}-{engine}-{plugin}-{os}-aio':
          network: nova
          plugin: cdh_5.3.0
          os:
            - u12
            - c6.6
     - 'dib-{network}-{engine}-{plugin}-{os}-aio':
          network: nova
          plugin: spark_1.0.0
          os:
            - u14
     - 'dib-{network}-{engine}-{plugin}-{os}-aio':
          network: nova
          plugin: hdp_1.3.2
          os:
            - c6.6
     - 'dib-{network}-{engine}-{plugin}-{os}':
          engine: heat
          plugin: mapr_4.0.2.mrv2
          os:
            - u14
     - 'dib-{network}-{engine}-{plugin}-{os}':
          engine: heat
          plugin: vanilla_2.6.0
     - 'dib-{network}-{engine}-{plugin}-{os}':
          engine: heat
          plugin: hdp_2.0.6
          os:
            - c6.6
